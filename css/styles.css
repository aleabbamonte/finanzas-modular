
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; min-height: 100vh; overflow-x: hidden; }
        :root {
            --primary: #1565c0; /* azul oscuro */
            --primary-light: #5e92f3;
            --primary-dark: #031a30; /* azul oscuro aún más intenso */
            --secondary: #40c4ff; /* celeste */
            --accent: #b2ebf2; /* celeste claro */
            --success: #2e7d32;
            --danger: #c62828;
            --warning: #f57c00;
            --text: #212121;
            --text-light: #757575;
            --bg: #fff;
            --bg-alt: #f2f6fa; /* gris claro */
            --border: #e0e0e0;
            --logo-base-size: 84px;
            --logo-scale: 1.24;
            --logo-title-gap: 3px;
        }
        /* Base Body */
        body { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #031a30 0%, #031422 100%); min-height: 100vh; color: var(--text); }
        .container { width: 100%; max-width: 430px; margin: 0 auto; min-height: 100vh; background: var(--bg); box-shadow: 0 0 38px 0 rgba(3,26,48,0.14); border-radius: 0 0 24px 24px; }
        /* Cabecera/logo/texto */
        .header { background: var(--primary-dark); color: white; padding: 32px 8px 20px 8px; text-align: center; }
        .logo-container { margin-bottom: var(--logo-title-gap); display: flex; justify-content: center; align-items: center; }
        .logo { width: calc(var(--logo-base-size) * var(--logo-scale)); height: calc(var(--logo-base-size) * var(--logo-scale)); filter: drop-shadow(0 4px 16px rgba(3,26,48,0.10)); }
        .brand h1 { font-family: 'Poppins', sans-serif; font-size: 2.2rem; font-weight: 800; letter-spacing: -0.5px; margin-bottom: 8px; text-shadow: 0 2px 8px rgba(0,0,0,0.06); text-align: center; }
        .brand .tagline { font-size: 1rem; opacity: 0.82; font-weight: 400; letter-spacing: 1px; }
        /* --- NAV TABS --- */
        .tabs { display: flex; flex-wrap: nowrap; overflow-x: auto; background: var(--bg-alt); border-bottom: 2px solid var(--border); position: sticky; top: 0; z-index: 100; }
        .tab { flex: 1 1 85px; min-width: 85px; text-align: center; padding: 14px 2px; border: none; background: transparent; font-size: 16px; font-weight: 700; color: var(--text-light); border-bottom: 3px solid transparent; transition: all 0.25s; letter-spacing: 0.2px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; }
        .tab:hover, .tab:focus { background: #e3f2fd; color: var(--primary); outline: none; }
        .tab.active { background: var(--bg); color: var(--primary); border-bottom: 3px solid var(--primary); }
        /* Subtabs Clear Mobile Layout */
        .subtabs { display: none; } /* <<--- sólo visible si está activa */
        .subtabs.active { display: flex; }
        .content { padding: 16px 4vw 26px 4vw; }
        /* --- BOTONES --- */
        .btn, button { width: 100%; max-width: 430px; min-height: 46px; margin: 8px auto 0 auto; display: block; padding: 14px; border: none; border-radius: 8px; font-size: 1.08rem; font-weight: 600; cursor: pointer; transition: background 0.2s, color 0.2s, box-shadow 0.18s; font-family: inherit; box-shadow: 0 1px 6px 0 rgba(3,26,48,0.11); text-align: center; }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover, .btn-primary:focus { background: var(--primary-dark); color: #fff; }        
        .btn-danger { background: var(--danger); color: #fff; }
        .btn-success { background: var(--success); color: #fff; }
        .btn-info { background: var(--secondary); color: #fff; }
        .btn-warning { background: #ffa000; color: #fff; }
        /* --- LISTAS/ITEMS --- */
        .item-list { background: var(--bg-alt); border-radius: 10px; padding: 10px; margin-top: 16px; }
        .item { display: flex; flex-direction: column; align-items: stretch; justify-content: center; padding: 16px; border-bottom: 1px solid var(--border); gap: 8px; border-radius: 6px; transition: background 0.15s; }
        .item:last-child { border-bottom: none; }
        /* --- FORMS y SELECTORES --- */
        .form-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
        input, select { width: 100%; padding: 13px 10px; border: 2px solid var(--border); border-radius: 8px; font-size: 16px; background: var(--bg); font-family: inherit; transition: border 0.2s, box-shadow 0.15s; }
        input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(21,101,192,0.08); }
        /* Adaptador para selectores (mes, año, USD...) en fila */
        .selector-bar, .filtros { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; align-items: center; justify-content: center; }
        .selector-bar select, .selector-bar input[type=number] { width: unset; min-width: 105px; max-width: 140px; }
        /* --- CARDS y SECCIONES --- */
        .cards { display: grid; grid-template-columns: 1fr; gap: 14px; margin-bottom: 20px; }
        .card { background: var(--primary); color: #fff; padding: 18px; border-radius: 14px; box-shadow: 0 2px 10px rgba(21,101,192,0.08); font-size: 1.05rem; font-weight: 500; }
        .section { background: var(--bg-alt); padding: 17px 11px 20px 11px; border-radius: 14px; margin-bottom: 17px; }
        .section-title { font-size: 19px; font-weight: 700; color: var(--primary-dark); margin-bottom: 16px; }
        /* --- Info banners, alerts, progress --- */
        .info-banner { background: linear-gradient(90deg, #daeaf8 0, #e7f6ff 100%); border-left: 5px solid var(--primary); color: var(--primary-dark); border-radius: 12px; padding: 15px 12px; margin-bottom: 20px; font-size: 0.98rem; display: flex; gap: 11px; align-items: flex-start; }
        .alert { padding: 14px 18px; border-radius: 10px; margin-bottom: 12px; font-size: 0.97rem; display: flex; align-items: center; gap: 10px; line-height: 1.5; }
        /* --- Grid gastos --- */
        .expense-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
        /* --- Media Queries Desktop/Tablet --- */
        @media (min-width: 531px) {            
          .container { max-width: 540px; }
        }
        @media (min-width: 768px) {
          .container { max-width: 742px; }
          .content { padding: 28px 8vw 32px 8vw; }
          .form-grid { grid-template-columns: repeat(2,1fr); }
          .expense-grid { grid-template-columns: repeat(2,1fr); }
          .cards { grid-template-columns: repeat(2,1fr); }
          .selector-bar { justify-content: flex-start; }
          .tabs { font-size: 17px; }
        }
        @media (min-width: 1100px) {
            .container { max-width: 900px; }
            .cards, .expense-grid { grid-template-columns: repeat(3,1fr); }
        }
        /* Mejoras añadidas: No scroll lateral, espaciado consistente, botones grandes/táctiles, mejoras de contraste/accesibilidad, secciones claramente separadas. */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .info-banner { background: linear-gradient(135deg, rgba(0, 121, 107, 0.08) 0%, rgba(21, 101, 192, 0.08) 100%); border-left: 4px solid var(--primary); padding: 16px; border-radius: 12px; margin-bottom: 20px; display: flex; gap: 12px; align-items: start; }
        .info-banner h3 { color: var(--primary-dark); font-size: 15px; margin-bottom: 4px; }
        .info-banner p { color: var(--text); font-size: 13px; line-height: 1.5; }
        .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 160px), 1fr)); gap: 12px; margin-bottom: 20px; }
        .card { color: white; padding: 16px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .card:hover { transform: translateY(-4px); }
        .card-title { font-size: 10px; opacity: 0.9; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
        .card-value { font-size: clamp(20px, 3.5vw, 26px); font-weight: 700; }
        .section { background: var(--bg-alt); padding: clamp(18px, 3vw, 25px); border-radius: 14px; margin-bottom: 18px; }
        .section-title { font-size: clamp(16px, 3vw, 19px); font-weight: 700; color: var(--primary-dark); margin-bottom: 16px; }
        .expense-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 200px), 1fr)); gap: 16px; }
        .expense-card { background: var(--bg); padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: all 0.3s; border-left: 4px solid var(--primary); }
        .expense-card:hover { transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0,0,0,0.12); }
        .expense-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .expense-title { font-size: 14px; font-weight: 600; color: var(--text); }
        .expense-icon { font-size: 24px; }
        .expense-amount { font-size: 24px; font-weight: 700; color: var(--primary); margin-bottom: 8px; }
        .expense-bar { height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; }
        .expense-bar-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-light)); transition: width 0.8s; border-radius: 4px; }
        .expense-percent { font-size: 12px; color: var(--text-light); margin-top: 6px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 140px), 1fr)); gap: 10px; margin-bottom: 10px; }
        input, select { padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 13px; transition: all 0.3s; background: var(--bg); font-family: inherit; }
        input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(0, 121, 107, 0.1); }
        input[type="color"] { padding: 4px; height: 42px; cursor: pointer; }
        .color-picker { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
        .color-option { width: 36px; height: 36px; border-radius: 8px; cursor: pointer; border: 3px solid transparent; transition: all 0.2s; }
        .color-option:hover { transform: scale(1.1); border-color: var(--primary); }
        .color-option.selected { border-color: var(--primary); box-shadow: 0 0 0 2px var(--bg), 0 0 0 4px var(--primary); transform: scale(1.05); }
        .color-custom { padding: 8px 12px; background: var(--bg-alt); border: 2px solid var(--border); border-radius: 8px; font-size: 12px; cursor: pointer; transition: all 0.2s; }
        .color-custom:hover { border-color: var(--primary); }
        .category-header:hover { transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0,0,0,0.2) !important; }
        .category-items { transition: all 0.3s ease-in-out; overflow: hidden; }
        .pin-btn:hover { background: #e0e0e0 !important; transform: scale(1.05); }
        .pin-btn:active { transform: scale(0.95); }
        .pin-dot.filled { background: #031a30 !important; }
        .btn { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.3s; font-family: inherit; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-danger { background: var(--danger); color: white; padding: 8px 16px; }
        .btn-success { background: var(--success); color: white; }
        .btn-info { background: var(--secondary); color: white; padding: 8px 16px; }
        .btn-warning { background: var(--accent); color: white; }
        .item-list { background: var(--bg); border-radius: 10px; padding: 12px; margin-top: 16px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 14px; border-bottom: 1px solid var(--border); gap: 8px; flex-wrap: wrap; transition: background 0.2s; border-radius: 6px; }
        .item:hover { background: var(--bg-alt); }
        .item:last-child { border-bottom: none; }
        .item-info { flex: 1; min-width: 160px; }
        .item-name { font-weight: 600; color: var(--text); display: flex; align-items: center; gap: 8px; font-size: 14px; }
        .card-mode-switch { display: flex; gap: 10px; margin-bottom: 15px; }
        .mode-btn { flex: 1; padding: 12px; border: 2px solid var(--border); background: var(--bg); border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .mode-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .tooltip-icon { display: inline-block; width: 18px; height: 18px; background: var(--primary); color: white; border-radius: 50%; text-align: center; line-height: 18px; font-size: 11px; font-weight: 700; cursor: help; margin-left: 6px; }
        .tooltip-icon:hover { background: var(--primary-dark); transform: scale(1.1); transition: all 0.2s; }
        .item-tag { display: inline-block; padding: 4px 10px; border-radius: 12px; font-size: 10px; font-weight: 600; color: white; margin-top: 4px; }
        .item-amount { font-weight: 700; color: var(--primary); font-size: clamp(15px, 3vw, 17px); }
        .progress-bar { background: var(--border); height: 32px; border-radius: 16px; overflow: hidden; margin-top: 10px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--success), var(--primary)); transition: width 0.8s; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 13px; }
        .alert { padding: 14px 18px; border-radius: 10px; margin-bottom: 12px; font-size: 13px; display: flex; align-items: center; gap: 10px; line-height: 1.5; }
        .alert-info { background: #e3f2fd; color: #0d47a1; border-left: 4px solid var(--secondary); }
        .alert-warning { background: #fff3e0; color: #e65100; border-left: 4px solid var(--warning); }
        .alert-danger { background: #ffebee; color: #c62828; border-left: 4px solid var(--danger); }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 10px; font-size: 10px; font-weight: 700; }
        .badge-success { background: #c8e6c9; color: #1b5e20; }
        .badge-warning { background: #fff3e0; color: #e65100; }
        .badge-danger { background: #ffcdd2; color: #b71c1c; }
        .chart-bars { display: flex; align-items: flex-end; justify-content: space-around; height: 260px; gap: 6px; padding: 15px 0; border-bottom: 2px solid var(--border); overflow-x: auto; }
        .chart-bar { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; min-width: 45px; }
        .bar { width: 100%; max-width: 60px; background: linear-gradient(to top, var(--primary), var(--primary-light)); border-radius: 6px 6px 0 0; transition: all 0.5s; min-height: 15px; animation: growUp 0.8s; }
        @keyframes growUp { from { height: 0; } }
        .bar:hover { opacity: 0.8; }
        .bar-label { font-size: 10px; font-weight: 600; color: var(--text); text-align: center; }
        .comparison-table { width: 100%; border-collapse: collapse; font-size: 13px; background: var(--bg); border-radius: 10px; overflow: hidden; }
        .comparison-table th, .comparison-table td { padding: 12px 10px; text-align: left; border-bottom: 1px solid var(--border); }
        .comparison-table th { background: var(--primary); color: white; font-weight: 600; text-transform: uppercase; font-size: 10px; }
        .comparison-table tr:hover { background: var(--bg-alt); }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); }
        .modal-content { background: var(--bg); margin: 5% auto; padding: clamp(25px, 5vw, 35px); border-radius: 16px; width: 90%; max-width: 550px; max-height: 85vh; overflow-y: auto; }
        .modal-header { font-size: clamp(20px, 4vw, 24px); font-weight: 700; color: var(--primary-dark); margin-bottom: 16px; text-align: center; }
        .modal-body { font-size: 14px; color: var(--text); line-height: 1.7; }
        .modal-body ul { margin: 14px 0; padding-left: 18px; }
        .modal-body li { margin-bottom: 8px; }
        .currency-badge { display: inline-block; padding: 2px 6px; background: var(--accent); color: white; border-radius: 4px; font-size: 10px; font-weight: 700; margin-left: 6px; }
        @media (max-width: 768px) {
            .header { padding: 25px 15px; }
            .tab { padding: 14px 16px; font-size: 13px; }
            .subtabs { top: 56px; }
            .form-grid { grid-template-columns: 1fr; }
            .cards { grid-template-columns: 1fr; }
            .expense-grid { grid-template-columns: 1fr; }
            .item { flex-direction: column; align-items: stretch; }
            .item-amount { text-align: left; }
            .btn { width: 100%; padding: 14px; }
            .chart-bars { height: 200px; }
        }
        /* =================== MODIFICACIÓN: Ocultar botones globales fuera de Resumen =================== */
        .boton-global {
          display: block;
        }
        /* Al mostrar cualquier tab excepto Resumen, ocultar los botones globales */
        .tab-content:not(#tab-resumen).active ~ .boton-global,
        #tab-gestion-ingresos.active ~ .boton-global, 
        #tab-gestion-fijos.active ~ .boton-global, 
        #tab-gestion-variables.active ~ .boton-global,
        #tab-gestion-tarjetas.active ~ .boton-global, 
        #tab-gestion-prestamos.active ~ .boton-global,
        #tab-metas-ahorros.active ~ .boton-global, 
        #tab-metas-presupuestos.active ~ .boton-global {
            display: none !important;
        }
        /* ============================================================================================= */
        /* === Mejoras subtabs submenús como carrusel deslizable horizontal para mobile === */
        .subtabs {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            flex-wrap: nowrap;
            gap: 6px;
            padding-bottom: 6px;
            scrollbar-width: none; /* Firefox */
        }
        .subtabs::-webkit-scrollbar { display: none; }
        .subtab {
            min-width: 145px;
            flex: 0 0 auto;
            margin-bottom: 0;
        }
        /* ====== Fin carrusel ====== */
        /* === Tooltip explicativo de scroll carrusel de submenús (solo mobile) === */
        @media (max-width: 600px) {
          .subtabs-tooltip {
            display: block;
            text-align: center;
            font-size: 13px;
            color: var(--primary-dark);
            opacity: 0.76;
            margin-bottom: 7px;
            margin-top: 0;
            pointer-events: none;
            user-select: none;
            font-family: inherit;
            background: var(--bg-alt);
            border-radius: 7px 7px 0 0;
            padding: 5px 0 3px 0;
          }
        }
        @media (min-width: 601px) { .subtabs-tooltip { display: none; } }
        /* === Fin tooltip carrusel === */
    

/* === Scroll snap para secciones en mobile === */
.tabs { 
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}
.tab {
  scroll-snap-align: start;
  scroll-padding: 16px;
}

/* Pequeño "tope" entre categorías: padding/margin */
.tab { padding-right: 14px; }

/* Desktop: convertir a grid para que no sea scrollable */
@media (min-width: 1024px) {
  .tabs { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; overflow-x: visible; }
  .tab { padding-right: 0; }
}

/* Ajustes para header logo (variable) */
:root { --logo-width: 80px; }
.header .logo { width: var(--logo-width); height: auto; }
